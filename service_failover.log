2024-11-14 14:00:21,165 - __main__ - INFO - Service Failover System Initialization
2024-11-14 14:00:21,165 - __main__ - INFO - Configuration: Max Attempts: 3, Base Delay: 1.0s, Jitter: 0.5s, Failure Threshold: 3, Recovery Time: 60s
2024-11-14 14:00:21,165 - failover.cache - INFO - Cache initialized with TTL=300
2024-11-14 14:00:21,165 - failover.connection_pool - INFO - ConnectionPool initialized with max_size=10
2024-11-14 14:00:21,165 - failover.service - INFO - Service initialized with base_url=https://api.example.com
2024-11-14 14:00:21,165 - failover.api - INFO - APIService initialized with base_url=https://api.example.com
2024-11-14 14:00:21,165 - failover.cache - INFO - Cache initialized with TTL=300
2024-11-14 14:00:21,165 - failover.connection_pool - INFO - ConnectionPool initialized with max_size=10
2024-11-14 14:00:21,165 - failover.service - INFO - Service initialized with base_url=https://dummyjson.com/products/search?q=phone
2024-11-14 14:00:21,165 - failover.api - INFO - APIService initialized with base_url=https://dummyjson.com/products/search?q=phone
2024-11-14 14:00:21,165 - failover.cache - INFO - Cache initialized with TTL=300
2024-11-14 14:00:21,165 - failover.connection_pool - INFO - ConnectionPool initialized with max_size=10
2024-11-14 14:00:21,165 - failover.service - INFO - Service initialized with base_url=https://service4.example.com
2024-11-14 14:00:21,165 - failover.api - INFO - APIService initialized with base_url=https://service4.example.com
2024-11-14 14:00:21,165 - failover.cache - INFO - Cache initialized with TTL=300
2024-11-14 14:00:21,165 - failover.connection_pool - INFO - ConnectionPool initialized with max_size=10
2024-11-14 14:00:21,165 - failover.service - INFO - Service initialized with base_url=https://service5.example.com
2024-11-14 14:00:21,165 - failover.api - INFO - APIService initialized with base_url=https://service5.example.com
2024-11-14 14:00:21,165 - failover.cache - INFO - Cache initialized with TTL=300
2024-11-14 14:00:21,165 - failover.connection_pool - INFO - ConnectionPool initialized with max_size=10
2024-11-14 14:00:21,165 - failover.service - INFO - Service initialized with base_url=https://service5.example.com
2024-11-14 14:00:21,165 - failover.api - INFO - APIService initialized with base_url=https://service5.example.com
2024-11-14 14:00:21,165 - __main__ - INFO - Performing initial health checks...
2024-11-14 14:00:21,165 - asyncio - INFO - Service ExternalAPIService(https://api.example.com) - No health check performed yet registered
2024-11-14 14:00:21,165 - failover.api - INFO - Verifying health for service https://api.example.com
2024-11-14 14:00:21,165 - failover.service - INFO - Performing health check for service with base_url=https://api.example.com
2024-11-14 14:00:21,165 - failover.metrics - INFO - Recorded health check for APIService: unhealthy
2024-11-14 14:00:21,181 - asyncio - INFO - Service ExternalAPIService(https://dummyjson.com/products/search?q=phone) - No health check performed yet registered
2024-11-14 14:00:21,182 - failover.api - INFO - Verifying health for service https://dummyjson.com/products/search?q=phone
2024-11-14 14:00:21,182 - failover.service - INFO - Performing health check for service with base_url=https://dummyjson.com/products/search?q=phone
2024-11-14 14:00:21,192 - failover.metrics - INFO - Recorded health check for APIService: healthy
2024-11-14 14:00:21,193 - failover.metrics - INFO - Recorded ping latency for APIService: 0.015999999945051968s
2024-11-14 14:00:21,195 - asyncio - INFO - Service ExternalAPIService(https://service4.example.com) - No health check performed yet registered
2024-11-14 14:00:21,195 - failover.api - INFO - Verifying health for service https://service4.example.com
2024-11-14 14:00:21,195 - failover.service - INFO - Performing health check for service with base_url=https://service4.example.com
2024-11-14 14:00:21,198 - failover.metrics - INFO - Recorded health check for APIService: unhealthy
2024-11-14 14:00:21,199 - asyncio - INFO - Service ExternalAPIService(https://service5.example.com) - No health check performed yet registered
2024-11-14 14:00:21,199 - failover.api - INFO - Verifying health for service https://service5.example.com
2024-11-14 14:00:21,200 - failover.service - INFO - Performing health check for service with base_url=https://service5.example.com
2024-11-14 14:00:21,202 - failover.metrics - INFO - Recorded health check for APIService: unhealthy
2024-11-14 14:00:21,204 - asyncio - INFO - Service ExternalAPIService(https://service5.example.com) - No health check performed yet registered
2024-11-14 14:00:21,204 - failover.api - INFO - Verifying health for service https://service5.example.com
2024-11-14 14:00:21,204 - failover.service - INFO - Performing health check for service with base_url=https://service5.example.com
2024-11-14 14:00:21,205 - failover.metrics - INFO - Recorded health check for APIService: unhealthy
2024-11-14 14:00:21,206 - __main__ - INFO - Health Check Summary: Total Services: 5, Healthy Services: 1, Unhealthy Services: 4
2024-11-14 14:00:21,206 - __main__ - WARNING - The following services are unhealthy:
2024-11-14 14:00:21,206 - __main__ - WARNING -   - ExternalAPIService(https://api.example.com) - Last Check: 2024-11-14 14:00:21 - Status: Unhealthy
2024-11-14 14:00:21,207 - __main__ - WARNING -   - ExternalAPIService(https://service4.example.com) - Last Check: 2024-11-14 14:00:21 - Status: Unhealthy
2024-11-14 14:00:21,207 - __main__ - WARNING -   - ExternalAPIService(https://service5.example.com) - Last Check: 2024-11-14 14:00:21 - Status: Unhealthy
2024-11-14 14:00:21,207 - __main__ - WARNING -   - ExternalAPIService(https://service5.example.com) - Last Check: 2024-11-14 14:00:21 - Status: Unhealthy
2024-11-14 14:00:21,207 - __main__ - INFO - Attempting to execute request...
2024-11-14 14:00:21,208 - failover.service - INFO - Performing health check for service with base_url=https://api.example.com
2024-11-14 14:00:21,208 - failover.api - ERROR - Service https://api.example.com is unhealthy: 
2024-11-14 14:00:21,208 - failover.policies - WARNING - Attempt 1 failed with error: Service is unhealthy: . Retrying in 1.16 seconds.
2024-11-14 14:00:22,368 - failover.service - INFO - Performing health check for service with base_url=https://api.example.com
2024-11-14 14:00:22,369 - failover.api - ERROR - Service https://api.example.com is unhealthy: 
2024-11-14 14:00:22,369 - failover.policies - WARNING - Attempt 2 failed with error: Service is unhealthy: . Retrying in 2.25 seconds.
2024-11-14 14:00:24,634 - failover.service - INFO - Performing health check for service with base_url=https://api.example.com
2024-11-14 14:00:24,634 - failover.api - ERROR - Service https://api.example.com is unhealthy: 
2024-11-14 14:00:24,634 - failover.policies - WARNING - Attempt 3 failed with error: Service is unhealthy: . Retrying in 4.20 seconds.
2024-11-14 14:00:28,853 - failover.policies - ERROR - Max retry attempts reached.
2024-11-14 14:00:28,853 - failover.circuit_breaker - WARNING - Service ExternalAPIService(https://api.example.com) - Last Check: 2024-11-14 14:00:24 - Status: Unhealthy recorded failure, count=1
2024-11-14 14:00:28,854 - asyncio - ERROR - Service ExternalAPIService(https://api.example.com) - Last Check: 2024-11-14 14:00:24 - Status: Unhealthy failed with error: Max retry attempts reached..
2024-11-14 14:00:28,854 - failover.service - INFO - Performing health check for service with base_url=https://dummyjson.com/products/search?q=phone
2024-11-14 14:00:28,948 - failover.circuit_breaker - INFO - Service ExternalAPIService(https://dummyjson.com/products/search?q=phone) - Last Check: 2024-11-14 14:00:28 - Status: Healthy recorded success
2024-11-14 14:00:28,948 - asyncio - INFO - Service ExternalAPIService(https://dummyjson.com/products/search?q=phone) - Last Check: 2024-11-14 14:00:28 - Status: Healthy responded successfully.
2024-11-14 14:00:28,948 - __main__ - INFO - Request successful!
2024-11-14 14:00:28,948 - __main__ - INFO - Response: {"products":[],"total":0,"skip":0,"limit":0}
